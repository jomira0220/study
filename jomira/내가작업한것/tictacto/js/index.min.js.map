{"version":3,"sources":["index.ts"],"names":["gameOpenBox","size","gameBoxId","characterArr","gameBox","document","querySelector","meList","comList","gameTableSet","clickPositionSet","$gameStartBox","querySelectorAll","forEach","btn","meIndex","addEventListener","characterSet","comIndex","markEvent","$gameBox","$gameHeader","createElement","append","className","innerHTML","$gameTable","id","i","$tr","j","$td","style","display","parentElement","$gameOrder","children","classList","add","innerText","push","e","td","turn","y","x","remove","target","order","contains","winCheck","closeCheck","setTimeout","com_y","Math","floor","random","com_x","click","closeGame","$closePop","el","gameCount","widthCount","lengthCount","leftCount","rightCount","length","console","log"],"mappings":"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","file":"index.min.js","sourcesContent":["document.querySelectorAll(\".treeWarp\").forEach((el)=>{\r\n  el.innerHTML = `\r\n      <div id=\"tree\"></div>\r\n      <div id=\"trunk\">\r\n        <div id=\"left-branch\"></div>\r\n        <div id=\"right-bottom-branch\"></div>\r\n        <div id=\"right-top-branch\"></div>\r\n      </div>\r\n  `\r\n})\r\n\r\n\r\n\r\nfunction gameOpenBox(size : number , gameBoxId : string, characterArr: string[] ){\r\n  \r\n  let gameBox = document.querySelector(gameBoxId) as HTMLElement;\r\n  let gameCount:number = 0;\r\n  let meList = []\r\n  let comList = []\r\n   \r\n  if(gameBox){ \r\n    \r\n    //게임박스 만들고\r\n    gameTableSet(gameBox,size)\r\n    \r\n    //클릭될 위치 체크용 배열 셋팅\r\n    clickPositionSet(size,meList,comList)\r\n    \r\n    //스타트박스에서 캐릭터 선택하면 게임시작\r\n    let $gameStartBox = document.querySelector(\"#startBox\")\r\n    if($gameStartBox){\r\n      let $gameStartBtn = $gameStartBox.querySelectorAll(\"button\")\r\n      $gameStartBtn.forEach((btn,meIndex) => {\r\n        btn.addEventListener(\"click\",() => {\r\n          characterSet(btn,gameBox,meIndex)\r\n          let comIndex = characterSet(btn,gameBox,meIndex) != 1 ? 0 : 1\r\n          markEvent(gameBox,size,meList,comList,meIndex,comIndex,characterArr)\r\n          \r\n        });\r\n      });\r\n    }\r\n    \r\n    \r\n    \r\n  }\r\n}\r\ngameOpenBox(3,\"#gameBox\",[\"dog\",\"cat\"])\r\n\r\nfunction gameTableSet(gameBox : Element, size : number){\r\n  let $gameBox = gameBox\r\n  let $gameHeader = document.createElement(\"div\");\r\n  $gameBox.append($gameHeader)\r\n  $gameHeader.className = \"gameHeader\"\r\n  $gameHeader.innerHTML = `<h2><span>T</span>ic <span>T</span>ac <span>T</span>oe</h2>\r\n  <p>가장 먼저 한줄을 맞추는 사람이<br/> 승리합니다</p>\r\n  <h4>게임순서</h4>\r\n  <div id=\"playerBox\">\r\n  <div class=\"player_me\"><img src=\"./img/dog.png\" alt=\"강아지\"><span></span></div>\r\n  <div class=\"player_you\"><img src=\"./img/cat.png\" alt=\"고양이\"><span></span></div>\r\n  </div>\r\n  <button class=\"resetBtn\" type=\"button\" onClick=\"location.reload()\">다시하기</button>\r\n  `\r\n\r\n  let $gameTable = document.createElement(\"table\");\r\n  $gameTable.id = \"gameTable\";\r\n\r\n  $gameBox.append($gameHeader)\r\n  $gameBox.append($gameTable)\r\n\r\n  for(let i = 0; i < size; i++){\r\n    let $tr = document.createElement(\"tr\");\r\n    $gameTable.append($tr)\r\n    for(let j = 0; j < size; j++){\r\n      let $td = document.createElement(\"td\");\r\n      $tr.append($td)\r\n    }\r\n  }\r\n  \r\n  return gameBox = $gameBox\r\n}//close gameTableSet\r\n\r\nfunction characterSet(btn : HTMLButtonElement, gameBox : HTMLElement, meIndex : number){\r\n  \r\n \r\n  let $gameBox = gameBox;\r\n  if($gameBox){\r\n  \r\n    $gameBox.style.display = \"flex\" \r\n    \r\n    if(btn.parentElement){\r\n      btn.parentElement.style.display = \"none\"\r\n    }\r\n    \r\n    let comIndex: number = 0;\r\n    let $gameOrder = $gameBox.querySelector('#playerBox') as HTMLElement\r\n    \r\n    if($gameOrder){\r\n      $gameOrder.children[meIndex].classList.add(\"on\")\r\n      let gameOrderChildren = $gameOrder.children[meIndex].children[1] as HTMLElement\r\n      gameOrderChildren.innerText = \"ME\"\r\n      let comBox: HTMLElement;\r\n      if(meIndex == 0){ \r\n        comBox = $gameOrder.children[meIndex+1].children[1] as HTMLElement\r\n        comBox.innerText = \"COM\"\r\n        comIndex = meIndex+1;\r\n      }else{\r\n        comBox =  $gameOrder.children[meIndex-1].children[1] as HTMLElement\r\n        comBox.innerText = \"COM\"\r\n        comIndex = meIndex-1;\r\n      }\r\n    }\r\n    return comIndex;\r\n  }\r\n}//close characterSet\r\n\r\nfunction clickPositionSet(size: number, meList: number[][], comList: number[][]){\r\n  //me와 com의 클릭한 위치 저장할 공간마련\r\n  for (let i = 0; i < size; i++) {\r\n      meList.push([])\r\n      comList.push([])\r\n    for (let j = 0; j < size; j++) {\r\n      meList[i].push(0);\r\n      comList[i].push(0);\r\n    }\r\n  }\r\n  \r\n  return meList,comList\r\n\r\n}//close clickPositionSet\r\n\r\nfunction markEvent(gameBox: HTMLElement,size: number,meList: number[][],comList: number[][],meIndex: number,comIndex: number, characterArr:string[]){\r\n  \r\n  let $tableTd = gameBox.querySelectorAll(\"td\")\r\n  $tableTd.forEach((e) => {\r\n    \r\n    e.addEventListener(\"click\", (td)=>{\r\n      \r\n      let turn = true\r\n      let $gameTable = gameBox.querySelector(\"#gameTable\") as HTMLElement;\r\n      let y = 0;\r\n      let x = 0;\r\n      \r\n      //컴이 선택할때 클릭못하도록 가리기용\r\n      $gameTable.classList.remove(\"on\")\r\n      \r\n      //클릭한 요소 위치값 확인\r\n      for(let i = 0; i < size; i++){\r\n        for(let j = 0; j < size; j++){\r\n          if(td.target == $gameTable.children[i].children[j]){\r\n            y = i;\r\n            x = j;\r\n          }\r\n        }\r\n      }\r\n\r\n      \r\n      let $gameOrder = gameBox.querySelector('#playerBox') as HTMLElement\r\n      $gameOrder.querySelectorAll(\"div\").forEach((order) => {\r\n        if(order.classList.contains('on')){\r\n          order.classList.remove(\"on\")\r\n        }\r\n      })\r\n\r\n      \r\n      \r\n      //내가 선택하는 경우\r\n      if (turn) {\r\n        $gameOrder.children[meIndex].classList.add(\"on\")\r\n        if ($gameTable.children[y].children[x].innerHTML == \"\") {\r\n          $gameTable.children[y].children[x].innerHTML = `<img src=\"./img/`+characterArr[meIndex]+`.png\">`;\r\n          meList[y][x] = 1\r\n          winCheck(meList,size,gameBox)\r\n          $gameTable.classList.add(\"on\")\r\n          turn = false\r\n        }\r\n      }\r\n      \r\n      //클로즈 박스가 생성되면 컴이 누르지 않도록\r\n      let closeCheck = gameBox.querySelector(\"#closePop\")\r\n      //console.log(closeCheck)\r\n      \r\n      if (turn == false && closeCheck == null) {\r\n        \r\n        //게임순서 표시 변경 처리\r\n        $gameOrder.children[meIndex].classList.remove(\"on\");\r\n        $gameOrder.children[comIndex].classList.add(\"on\");\r\n        \r\n        //컴이 0.5초있다가 누르기\r\n        setTimeout( () => {\r\n            while(true){\r\n                \r\n                //랜덤위치 뽑고\r\n                let com_y = Math.floor(Math.random() * size);\r\n                let com_x = Math.floor(Math.random() * size);\r\n                \r\n                //해당 위치에 아무것도 없으면 해당 위치 자동클릭처리\r\n                if($gameTable.children[com_y].children[com_x].innerHTML == \"\"){\r\n                  \r\n                    $gameTable.children[com_y].children[com_x].innerHTML = `<img src=\"./img/`+ characterArr[comIndex] +`.png\">`;\r\n                    comList[com_y][com_x] = 1;\r\n                    winCheck(comList,size,gameBox);\r\n                    turn = true\r\n                    let gameClickTable = $gameTable.children[com_y].children[com_x] as HTMLElement\r\n                    gameClickTable.click();\r\n                    break;\r\n                }\r\n            }\r\n        },500);\r\n        \r\n\r\n      }//컴이 선택할때 종료\r\n      \r\n      \r\n    });\r\n  })\r\n    \r\n}//close markEvent\r\n  \r\nfunction closeGame(gameBox: HTMLElement){\r\n  \r\n  let $gameOrder = gameBox.querySelector('#playerBox') as HTMLElement;\r\n  $gameOrder.querySelectorAll(\"div\").forEach((order) => {\r\n    if(order.classList.contains('on')){\r\n      \r\n      let $closePop = document.createElement(\"div\")\r\n      $closePop.id = \"closePop\"\r\n      gameBox.append($closePop)\r\n      \r\n      if(order.innerText == \"ME\"){\r\n        $closePop.innerHTML = `<img src=\"./img/win.png\" alt=\"win\"><p></p>`;\r\n        $closePop.children[1].innerHTML = \"얏호! 내가 <span>이겼다!</span>\";\r\n      }else{\r\n        $closePop.innerHTML = `<img src=\"./img/crying.png\" alt=\"울음표시\"><p></p>`;\r\n        $closePop.children[1].innerHTML = \"내가 <span>졌다!</span>\"\r\n      }\r\n    }\r\n  })\r\n  \r\n}//close closeGame\r\n\r\n\r\nlet gameCount:number = 0;\r\nfunction winCheck(meList : number[][], size: number, gameBox: HTMLElement) {\r\n\r\n  let widthCount = 0;\r\n  let lengthCount = 0;\r\n  let leftCount = 0;\r\n  let rightCount = 0;\r\n\r\n    //가로검사\r\n    for (let i = 0; i < meList.length; i++) {\r\n      for (let j = 0; j < meList.length; j++) {\r\n        if (meList[i][j] == 1) {\r\n          widthCount++;\r\n        }\r\n      }\r\n      if (widthCount == 3) {\r\n        closeGame(gameBox)\r\n        break;\r\n      } else {\r\n        widthCount = 0;\r\n      }\r\n    }\r\n  \r\n\r\n    //세로검사\r\n    for (let i = 0; i < meList.length; i++) {\r\n      for (let j = 0; j < meList.length; j++) {\r\n        if (meList[j][i] == 1) {\r\n          lengthCount++;\r\n        }\r\n      }\r\n      if (lengthCount == 3) {\r\n        closeGame(gameBox);\r\n        break;\r\n      } else {\r\n        lengthCount = 0;\r\n      }\r\n    }\r\n\r\n    //왼쪽 대각선 검사\r\n    if (meList[0][0] == 1 && meList[1][1] == 1 && meList[2][2] == 1) {\r\n      leftCount = 1\r\n      closeGame(gameBox);\r\n    }\r\n  \r\n    //오른쪽 대각선 검사\r\n    if (meList[0][2] == 1 && meList[1][1] == 1 && meList[2][0] == 1) {\r\n      rightCount = 1\r\n      closeGame(gameBox);\r\n    }\r\n  \r\n    \r\n  //검사할때마다 게임 카운트 세기\r\n  gameCount++\r\n\r\n  //무승부 판단\r\n  console.log(gameCount,widthCount,lengthCount,leftCount,rightCount)\r\n  if(gameCount == (size*size)){\r\n    //모든 카운트를 채웠는데 빙고된게 없으면 무승부로 처리\r\n    if(widthCount == 0 && lengthCount == 0 && leftCount == 0 && rightCount == 0){\r\n      let $closePop = document.createElement(\"div\")\r\n      $closePop.id = \"closePop\"\r\n      gameBox.append($closePop)\r\n      $closePop.innerHTML = `<img src=\"./img/draw.png\"alt=\"무승부\"><p></p>`;\r\n      $closePop.children[1].innerHTML = \"<span>무승부<span>에요!\"\r\n    }\r\n  }\r\n\r\n}//close winCheck\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}