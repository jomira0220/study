"use strict";var _db=require("./db.js");document.cookie="safeCookie1=foo; SameSite=Lax",document.cookie="safeCookie2=foo",document.cookie="crossCookie=bar; SameSite=None; Secure";var storeKey=Object.keys(_db.storeDB),storeValue=Object.values(_db.storeDB.Seoul);console.log(storeValue);var menuKey=Object.keys(_db.menuDB);console.log(menuKey);var menuValue=Object.values(_db.menuDB);console.log(menuValue);var userValue=Object.values(_db.memberDB.Member);function introClose(){var e=document.querySelector(".intro");e&&setTimeout(function(){e.setAttribute("style","border-radius:100%;width:0;height:0;")},1500)}function loginCheck(){var e=document.querySelector(".loginBtn");e&&e.addEventListener("click",function(){var t=document.querySelector(".userId").value,r=document.querySelector(".userPw").value;userValue.forEach(function(e){e.id==t&&e.password==r?(document.location.href="../index.html?userId="+t,localStorage.setItem("memberId",t)):""==t||""==r?alert("아이디 또는 비밀번호를 입력해주세요"):e.id==t&&e.password==r||alert("아이디 또는 비밀번호를 확인해주세요")})})}function nameCheck(){var e=document.querySelectorAll(".name"),r=localStorage.getItem("memberId");userValue.forEach(function(t){t.id==r&&e.forEach(function(e){e.innerText=t.memberName})})}function copyToClipBoard(){var e=document.querySelector("#copyBtn");e&&e.addEventListener("click",function(){console.log("d");var e=document.querySelector("#copyText").value;navigator.clipboard.writeText(e).then(function(){console.log("Text copied to clipboard...")}).catch(function(e){console.log("Something went wrong",e)})})}introClose(),loginCheck(),nameCheck(),copyToClipBoard();var popOnBtn=document.querySelector("#popOnBtn"),popOffBtn=document.querySelector("#popOffBtn"),popBox=document.querySelector("#popBox");if(popOnBtn&&popOffBtn&&popBox){var popOpen=function(){popOnBtn.addEventListener("click",function(){popBox.classList.remove("off")})},popClose=function(){popOffBtn.addEventListener("click",function(){popBox.classList.add("off")})};popOpen(),popClose()}function backPage(){var e=document.querySelector("header .backBtn");e&&e.addEventListener("click",function(){window.history.back()})}function storeList(){function e(){var t=this.querySelector(".storeName").innerText,r=this.querySelector(".storeName").dataset.storeCode;document.querySelector(".storePop .storeName span").innerText=t;var e=document.querySelector(".storePop");e.classList.remove("off");var n=document.querySelector(".storePop .cancelBtn"),o=document.querySelector(".storePop .orderBtn");n.addEventListener("click",function(){e.classList.add("off")}),o.addEventListener("click",function(){document.location.href="./orderStep_1.html?storeCode="+r+"&category=0";var e=[t,r];localStorage.setItem("orderStore",JSON.stringify(e))})}var t=document.querySelector(".storeList tbody");if(t)for(var r=0;r<storeValue.length;r++){var n=document.createElement("tr");t.append(n),"open"!=storeValue[r].storeOpen?t.children[r].classList.add("off"):t.children[r].addEventListener("click",e),t.children[r].innerHTML='\n        <td class="storeInfo">\n          <div class="storeName" data-store-code="'+storeValue[r].storeCodeName+'">'+storeValue[r].storeName+'</div>\n          <div class="storeAddress">'+storeValue[r].storeAddress+'</div>\n          <div class="storeMap">'+storeValue[r].storeDistance+'</div>\n        </td>\n        <td class="storeImgBox">\n          <img class="storeImg" src="../resource/img/store/'+storeValue[r].storeCodeName+'.jpg" alt="">\n          <div class="favorite"><i class="icon-favorite_star_circle"></i></div>\n        </td>\n        '}}function menuCategory(){var n=document.querySelector(".orderStep_1 .menuCategory ul");if(n){var o=document.location.href.split("&");document.querySelector(".searchBtn a").setAttribute("href","../page/prdSearch.html"+location.search);for(var e=function(u){var e=menuKey[u];if(n.append(document.createElement("li")),n.children[u].innerHTML='<a href="'+o[0]+"&category="+u+'">'+e+"</a>",o[1]=="category="+u){var t=function(e){m.innerHTML="";for(var t=0,r=Math.ceil(p/e),n=0;n<r;n++){m.append(document.createElement("tr"));for(var o=0;o<e;o++){if(m.children[n].append(document.createElement("td")),t<p){var a=Object.values(menuValue[u])[t],c=a.prdCategory.temperature,i=Object.keys(menuValue[u])[t],l=a.prdName.ko,d=a.prdPrice,s=a.prdCategory.language.en;m.children[n].children[o].innerHTML='\n                <a href="orderStep_2.html'+location.search+"&prdCode="+i+'">\n                  <img src="../resource/img/menu/'+s+"/"+c+"/"+i+'.jpg" alt="">\n                  <div class="prdInfo"><div class="prdName"><span>('+c+")</span>"+l+'</div>\n                    <div class="prdPrice"><span>'+d+"</span>원</div>\n                  </div>\n                </a>\n                "}t++}}};n.children[u].classList.add("active");var p=Object.keys(menuValue[u]).length;document.querySelector(".prdTotalCount > span").innerText=p;var m=document.querySelector(".prdList"),r="3";t(r),document.querySelector(".colCount").addEventListener("click",function(){"3"==r?(r="1",document.querySelector(".colCount > span").innerText="3",m.classList.add("line_1")):"1"==r&&(r="3",document.querySelector(".colCount > span").innerText="1",m.classList.remove("line_1")),t(r)}),"디저트"==e&&document.querySelectorAll(".prdName span").forEach(function(e){e.remove()})}},t=0;t<menuKey.length;t++)e(t);var r=document.querySelector(".orderStep_1"),a=document.createElement("footer");a.className="menuFooter",r.append(a);for(var c=new URL(location.href).searchParams.get("storeCode"),i="",l=0;l<storeValue.length;l++)storeValue[l].storeCodeName==c&&(i=storeValue[l].storeName);a.innerHTML='\n     <button type="button" id="storeChangeBtn">'+i+' <i class="icon-angle_down"></i>\n     </button>\n     <button class="cartBtn" onClick="location.href=\'../page/basket.html\'">\n      <span class="hidden">장바구니</span><i class="icon-cart"></i><span class="cartCount">0</span>\n     </button>\n    ';var d=a.querySelector("#storeChangeBtn"),s=document.createElement("div");s.id="storeChangePop",d.addEventListener("click",function(){a.append(s)}),s.innerHTML='\n      <div class="storeChangeBox">\n        <strong>매장을 변경하시겠습니까?</strong>\n        <p>매장을 변경하실 경우 이전에 담은 메뉴가 삭제됩니다.</p>\n        <button type="button" class="changeCancel">취소</button>\n        <button type="button" class="changeOk" onclick="location.href=\'storeChoice.html\'">매장변경</button>\n      </div>\n    ',s.querySelector(".changeCancel").addEventListener("click",function(){s.remove()})}}function prdSearchList(){var t=document.querySelector(".prdSearch .prdList");if(t){for(var e=document.querySelector(".searchBox input"),r=0,n=0,o=0;o<menuValue.length;o++)for(var a=0;a<Object.values(menuValue[o]).length;a++){var c=Object.values(menuValue[o])[a],i=c.prdCategory.language.en,l=c.prdCategory.temperature,d=Object.keys(menuValue[o])[a],s=c.prdName.ko,u=c.prdPrice;t.append(document.createElement("tr")),""==e.value?(t.children[r].innerHTML='\n            <td><a href="orderStep_2.html'+location.search+"&prdCode="+d+'">\n              <img src="../resource/img/menu/'+i+"/"+l+"/"+d+'.jpg" alt="">\n              <div class="prdInfo">\n                <div class="prdName"><span>('+l+")</span>"+s+'</div>\n                <div class="prdPrice"><span>'+u+"</span>원</div>\n              </div>\n            </a></td>\n            ",r++):-1!=s.indexOf(e.value)&&(t.append(document.createElement("tr")),t.children[n].innerHTML='\n              <td><a href="orderStep_2.html'+location.search+"&prdCode="+d+'">\n                <img src="../resource/img/menu/'+i+"/"+l+"/"+d+'.jpg" alt="">\n                <div class="prdInfo">\n                  <div class="prdName"><span>('+l+")</span>"+s+'</div>\n                  <div class="prdPrice"><span>'+u+"</span>원</div>\n                </div>\n              </a></td>\n              ",n++)}e.addEventListener("keydown",function(e){13==e.keyCode&&(t.innerHTML="",prdSearchList())})}}function prdOptionSet(){if(document.querySelector(".orderStep_2")){for(var o,e=new URL(location.href).searchParams.get("prdCode"),t=0;t<menuValue.length;t++)for(var r=0;r<Object.keys(menuValue[t]).length;r++)e==Object.keys(menuValue[t])[r]&&(o=Object.values(menuValue[t])[r]);var n=o.prdCategory.temperature,a=o.prdCategory.language.en,c=o.prdName.ko,i=o.prdDes;if(document.querySelector("#prdDetail").innerHTML='\n    <img src="../resource/img/menu/'+a+"/"+n+"/"+e+'.jpg" alt="">\n    <div class="prdName">'+c+"</div>\n    <p>"+i+"</p>","none"!=n){var l=document.querySelector("#prdDetail .prdName");l.prepend(document.createElement("span")),l.children[0].innerHTML="("+n+")"}for(var d=document.querySelector(".optionBox form"),u=o.prdOption,s=function(e){d.append(document.createElement("div"));var t=d.children[e];t.classList.add("option_"+(e+1)),t.append(document.createElement("h4"));var r=Object.values(u)[e];t.querySelector("h4").innerHTML=r.title;for(var n=0;n<Object.keys(r).length-1;n++)t.append(document.createElement("label")),t.children[n+1].innerHTML='<input type="radio" value="'+r[n][0]+'" name="option_'+(e+1)+'" data-option-price="'+r[n][1]+'">'+r[n][0],n+1==1&&(t.children[n+1].children[0].checked=!0);var s=o.prdRecommended;s.forEach(function(e,t){var r=document.querySelector(".recoMenu ul");r.append(document.createElement("li"));for(var n=0;n<menuKey.length;n++){var o=s[t],a=menuValue[n][o];if(null!=a){var c=a.prdCategory.language.en,i=a.prdCategory.temperature,l=a.prdName.ko,d=a.prdPrice;r.children[t].innerHTML='<label>\n            <img src="../resource/img/menu/'+c+"/"+i+"/"+o+'.jpg" alt="">\n            <div class="recoInfo">\n              <div class="recoName" data-menu-code="'+o+'">'+l+'</div>\n              <div class="recoPrice"><span>'+d.toLocaleString("ko-KR")+'</span>원</div>\n            </div>\n            <input type="checkbox" name="recoOption" value="'+o+'" data-option-price="'+d+'">\n            </label>'}}})},p=0;p<Object.keys(u).length;p++)s(p);prdOptionTotal(e)}}function prdOptionTotal(e){var t=document.querySelectorAll(".optionBox div"),r=document.querySelectorAll(".orderBottom .prdCountBox button"),n=document.querySelector(".orderBottom .prdCountBox .prdCount"),o=Number(n.value),a=new URL(location.href).searchParams.get("category"),c=Number(menuValue[a][e].prdPrice),i={},l=0;function d(e,t,r){var n=t*e+r;document.querySelector(".orderBottom .totalBox b").innerText=n.toLocaleString("Ko-KR")+"원"}d(o,c,l),t.forEach(function(e,t){e.querySelectorAll("input").forEach(function(e){e.addEventListener("click",function(){return"radio"==e.type?i[e.name]=Number(e.dataset.optionPrice):e.checked?i[e.value]=Number(e.dataset.optionPrice):delete i[e.value],l=0,Object.values(i).forEach(function(e){l+=e}),d(o,c,l),l})})}),r.forEach(function(e){e.addEventListener("click",function(){"plus"==e.className?(o+=1,n.setAttribute("value",o)):1<o?(o-=1,n.setAttribute("value",o)):alert("1개 미만 으로는 주문이 불가합니다."),d(o,c,l)})})}function menuToggleBtn(){var e=document.querySelector(".orderStep_2 .toggleBtn");e&&e.addEventListener("click",function(e){var t=e.target.nextElementSibling;"none"==window.getComputedStyle(t).getPropertyValue("display")?(t.style.display="block",e.target.children[0].setAttribute("class","icon-angle_down")):(t.style.display="none",e.target.children[0].setAttribute("class","icon-angle_up"))})}function storeSearchList(){if(document.querySelector(".storeSearch")){var c=document.querySelector(".storeList");document.querySelector(".searchBox input").addEventListener("keydown",function(e){if(13==e.keyCode){c.innerHTML="";for(var t=0,r=0;r<storeValue.length;r++){var n=storeValue[r],o=n.storeName,a=n.storeOpen;-1!=o.indexOf(e.target.value)&&(console.log(o),c.append(document.createElement("tr")),"preparing"==a&&c.children[t].classList.add("off"),c.children[t].innerHTML='<td class="storeInfo">\n              <div class="storeName" data-store-code="'+storeValue[r].storeCodeName+'">'+storeValue[r].storeName+'</div>\n              <div class="storeAddress">'+storeValue[r].storeAddress+'</div>\n              <div class="storeMap">'+storeValue[r].storeDistance+'</div>\n              </td>\n              <td class="storeImgBox">\n              <img class="storeImg" src="../resource/img/store/'+storeValue[r].storeCodeName+'.jpg" alt="">\n              <div class="favorite"><i class="icon-favorite_star_circle"></i></div>\n            </td>',t++)}}})}}function userRecommended(){var e=document.querySelector(".sugestionMenu .swiper-wrapper");if(e){for(var t=new URL(location.href).searchParams.get("userId"),r=[],n=0;n<_db.memberDB.Member.length;n++)_db.memberDB.Member[n].id==t&&(r=_db.memberDB.Member[n].userRecommended);for(var o=0;o<r.length;o++){var a=document.createElement("div");e.prepend(a),a.className="swiper-slide";for(var c=0;c<menuValue.length;c++)if(null!=menuValue[c][r[o]]){var i=menuValue[c][r[o]],l=r[o];a.innerHTML='\n            <a href="./page/storeChoice.html?'+t+'">\n              <img src="./resource/img/menu/'+i.prdCategory.language.en+"/"+i.prdCategory.temperature+"/"+l+'.jpg" alt="">\n              <div class="title"></div>\n            </a>\n          ',"none"!=i.prdCategory.temperature?a.children[0].children[1].innerHTML="("+i.prdCategory.temperature+")"+i.prdName.ko:a.children[0].children[1].innerHTML=i.prdName.ko}}}}function basketBtn(){var o=[],e=document.querySelector(".basketBtn");e&&(null!=localStorage.getItem("basketList")&&(o=JSON.parse(localStorage.getItem("basketList"))),e.addEventListener("click",function(){var t=[],r={prdName:document.querySelector("#prdDetail .prdName").innerText,prdCode:new URL(location.href).searchParams.get("prdCode"),prdOption:t,prdPrice:document.querySelector(".orderBottom .totalBox b").innerText,prdCount:Number(document.querySelector(".orderBottom .prdCountBox .prdCount").value),prdImg:document.querySelector("#prdDetail > img").getAttribute("src")};document.querySelectorAll(".optionBox div[class^='option_'] input").forEach(function(e){1==e.checked&&t.push(e.value)});var n={prdName:"",prdCode:"",prdPrice:0,prdCount:1,prdImg:""};document.querySelectorAll(".recoInfo").forEach(function(e){1==e.nextElementSibling.checked&&(n.prdName=String(e.querySelector(".recoName").innerText),n.prdCode=String(e.querySelector(".recoName").getAttribute("data-menu-code")),n.prdPrice=String(e.querySelector(".recoPrice").innerText),r.prdPrice=(document.querySelector(".orderBottom .totalBox b").innerText.replace(/[^0-9]/g,"")-e.querySelector(".recoPrice").innerText.replace(/[^0-9]/g,"")).toLocaleString("ko-KR")+"원",console.log(r.prdPrice),localStorage.setItem("buyItemInfo",JSON.stringify(n)),o.push(n))}),localStorage.setItem("buyItemInfo",JSON.stringify(r)),o.push(r),localStorage.setItem("basketList",JSON.stringify(o)),document.querySelector(".cartCount").innerText=o.length}))}function basketCountSet(){var e=document.querySelector(".cartCount");if(e){var t=0,r=JSON.parse(localStorage.getItem("basketList"));null!=r&&(t=r.length),e.innerText=t}}function basketListSet(){var e=document.querySelector("#order.basket");if(e){var i=JSON.parse(localStorage.getItem("basketList")),t=JSON.parse(localStorage.getItem("orderStore"))[0];if(document.querySelector("#storeName").innerText=t,null==i)i=0,document.querySelector(".basketEmpty").style.display="flex";else{var l=function(){var e=document.querySelectorAll(".basketList .prdPrice"),t=0;e.forEach(function(e){t+=Number(e.innerText.replace(/[^0-9]/g,"")),document.querySelector(".orderBottom b").innerText=t.toLocaleString("ko-KR")+"원"})};document.querySelector(".basketEmpty").style.display="none";var a=e.querySelector(".basketList");i.forEach(function(r,e){var n=document.createElement("li");a.append(n);var o=0;menuValue.forEach(function(e){var t=e[r.prdCode];return null!=t&&(t.prdCategory.language.en,t.prdCategory.temperature,o=t.prdPrice),!1}),n.innerHTML='\n            <div class="prdImg"><img src="'+r.prdImg+'" alt=""></div>\n            <div class="basketPrd">\n              <div class="prdName">'+r.prdName+'</div>\n              <ul>\n              </ul>\n              <div class="delBtn"><button><i class="icon-cancel"></i></button></div>\n              <div class="prdCountBox">\n                <div class="countBox">\n                  <button class="downBtn" type="button" aria-label="수량내리기"><i class="icon-circle_minus"></i></button>\n                  <div class="prdCount">'+r.prdCount+'</div>\n                  <button class="upBtn" type="button" aria-label="수량올리기"><i class="icon-circle_plus"></i></button>\n                </div>\n                <div class="prdPrice">'+r.prdPrice+"</div>\n              </div>\n            </div>\n            \n        ",r.prdOption&&r.prdOption.forEach(function(e){var t=document.createElement("li");t.innerText=e,n.querySelector(".basketPrd ul").append(t)}),function(n,t,o){var e=n.querySelector(".upBtn"),r=n.querySelector(".downBtn"),a=n.querySelector(".prdCount"),c=n.querySelector(".prdPrice");e.addEventListener("click",function(e){var t=Number(n.querySelector(".prdCount").innerText);if(t++,1<(a.innerText=t)){var r=Number(c.innerText.replace(/[^0-9]/g,""));r+=o,c.innerText=r.toLocaleString("ko-KR")+"원",l()}}),r.addEventListener("click",function(e){var t=Number(n.querySelector(".prdCount").innerText);if(1<t){t--,a.innerText=t;var r=Number(c.innerText.replace(/[^0-9]/g,""));r-=o,c.innerText=r.toLocaleString("ko-KR")+"원",l()}else alert("1개이상 구매가 가능합니다.")}),n.querySelector(".delBtn").addEventListener("click",function(e){i.splice(t,1),console.log(i),""==i?(localStorage.removeItem("basketList"),localStorage.removeItem("buyItemInfo"),n.remove(),document.querySelector(".basketEmpty").style.display="flex"):(localStorage.setItem("basketList",JSON.stringify(i)),n.remove())})}(n,e,o)}),l()}}}function paymentPageSet(){if(document.querySelector("#order.payment")){var e=JSON.parse(localStorage.getItem("orderStore"));document.querySelector("#storeName").innerText=e[0];var t=JSON.parse(localStorage.getItem("basketList")),n=document.querySelector("#orderList");t.forEach(function(e){var r=document.createElement("li");n.append(r),r.innerHTML='\n      <div class="prdImg"><img src="'+e.prdImg+'" alt=""></div>\n      <div class="basketPrd">\n        <div class="prdName">'+e.prdName+'</div>\n        <ul class="optionList">\n        </ul>\n        <div class="prdCountBox">\n          <div class="countBox">\n            <div class="prdCount">'+e.prdCount+'개</div>\n          </div>\n          <div class="prdPrice">'+e.prdPrice+"</div>\n        </div>\n      </div>\n      ",e.prdOption&&e.prdOption.forEach(function(e){var t=document.createElement("li");t.innerText=e,r.querySelector(".basketPrd ul").append(t)})}),document.querySelector(".orderContraction").innerText=t[0].prdName+" 외 "+(t.length-1)+"건";var r=document.querySelector(".payment .toggleBtn");r.addEventListener("click",function(){n.classList.toggle("open"),r.querySelector("i").classList.toggle("icon-angle_up")})}}function orderBtn(){document.querySelector(".orderBtn")}backPage(),storeList(),menuCategory(),prdSearchList(),prdOptionSet(),menuToggleBtn(),storeSearchList(),userRecommended(),basketBtn(),basketCountSet(),basketListSet(),paymentPageSet(),orderBtn();
//# sourceMappingURL=main.min.js.map
